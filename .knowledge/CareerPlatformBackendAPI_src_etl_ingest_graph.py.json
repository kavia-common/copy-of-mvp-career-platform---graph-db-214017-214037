{"is_source_file": true, "format": "Python", "description": "This script provides command-line utilities for ingesting graph data related to roles, competencies, their interrelationships, and adjacency relationships into a graph database (Neo4j). It supports reading data from CSV or Excel files, JSON seed files, and performs operations like upserting nodes and edges, with flexible column normalization.", "external_files": ["src.core.config", "src.graph.graph_client", "src.graph.graph_dal"], "external_methods": ["get_settings", "GraphClient.start", "GraphClient.enabled", "GraphClient.driver", "GraphDAL.upsert_role", "GraphDAL.upsert_competency", "GraphDAL.upsert_requires_edge", "GraphDAL.upsert_adjacency"], "published": ["ingest_roles", "ingest_competencies", "ingest_requires", "ingest_adjacency", "seed_from_json", "ingest_all"], "classes": [], "methods": [{"name": "GraphDAL _ensure_graph()", "description": "Initializes and provides access to the GraphDAL instance after ensuring the graph client is properly started and enabled.", "scope": "", "scopeKind": ""}, {"name": "pd.DataFrame _read_table(path: Path)", "description": "Reads a CSV or Excel file into a pandas DataFrame based on the file extension.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] _norm_col(df: pd.DataFrame, col: str)", "description": "Normalizes column names by ignoring case and certain characters to find matching columns in DataFrame.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] _require_columns(df: pd.DataFrame, required: List[str])", "description": "Validates that required columns are present in the DataFrame, returning a mapping of standard names to actual column names.", "scope": "", "scopeKind": ""}, {"name": "None ingest_roles(file: str = typer.Argument(..., help=\"CSV/Excel file containing roles: id, name, description, source, version\"))", "description": "Command to ingest role data from a specified CSV or Excel file into the graph database.", "scope": "", "scopeKind": ""}, {"name": "None ingest_competencies(file: str = typer.Argument(..., help=\"CSV/Excel file containing competencies: id, name, definition, source, version\"))", "description": "Command to ingest competency data from a specified CSV or Excel file into the graph database.", "scope": "", "scopeKind": ""}, {"name": "None ingest_requires( file: str = typer.Argument(..., help=\"CSV/Excel file with columns: roleId, competencyId, requiredLevel, version, source, validFrom, validTo\") )", "description": "Command to ingest 'requires' relationships (edges) from a specified CSV or Excel file.", "scope": "", "scopeKind": ""}, {"name": "None ingest_adjacency( file: str = typer.Argument(..., help=\"CSV/Excel file with columns: roleA, roleB, score, rationale, version, source\"), bidirectional: bool = typer.Option(True, help=\"Create both A->B and B->A\"), )", "description": "Command to ingest adjacency relationships between roles from a specified CSV or Excel file.", "scope": "", "scopeKind": ""}, {"name": "None seed_from_json( directory: str = typer.Argument(\"seed\", help=\"Directory containing JSON seeds: roles.json, competencies.json, requires.json, adjacency.json\"), )", "description": "Seeds the database with data from JSON seed files found in a specified directory.", "scope": "", "scopeKind": ""}, {"name": "None ingest_all( data_dir: str = typer.Argument(\"data\", help=\"Directory containing CSV/Excel files for roles, competencies, requires, adjacency\"), bidirectional: bool = typer.Option(True, help=\"Create both A->B and B->A for adjacency\"), )", "description": "Attempts to ingest all entity and relationship data from CSV or Excel files in a directory, if present.", "scope": "", "scopeKind": ""}, {"name": "Optional[List[dict]] _load_json_if_exists(path: Path)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Path] pick_file(options: List[Path])", "scope": "ingest_all", "scopeKind": "function", "description": "unavailable"}], "calls": ["get_settings", "pd.read_csv", "pd.read_excel", "typer.Exit", "GraphClient.start", "GraphDAL.upsert_role", "GraphDAL.upsert_competency", "GraphDAL.upsert_requires_edge", "GraphDAL.upsert_adjacency", "json.load"], "search-terms": ["ingest_graph", "graph ETL", "role", "competency", "requires", "adjacency", "Neo4j", "seed JSON", "csv excel parser"], "state": 2, "file_id": 8, "knowledge_revision": 17, "git_revision": "", "ctags": [{"_type": "tag", "name": "_ensure_graph", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def _ensure_graph() -> GraphDAL:$/", "language": "Python", "typeref": "typename:GraphDAL", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_load_json_if_exists", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def _load_json_if_exists(path: Path) -> Optional[List[dict]]:$/", "language": "Python", "typeref": "typename:Optional[List[dict]]", "kind": "function", "signature": "(path: Path)"}, {"_type": "tag", "name": "_norm_col", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def _norm_col(df: pd.DataFrame, col: str) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(df: pd.DataFrame, col: str)"}, {"_type": "tag", "name": "_read_table", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def _read_table(path: Path) -> pd.DataFrame:$/", "language": "Python", "typeref": "typename:pd.DataFrame", "kind": "function", "signature": "(path: Path)"}, {"_type": "tag", "name": "_require_columns", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def _require_columns(df: pd.DataFrame, required: List[str]) -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "(df: pd.DataFrame, required: List[str])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^app = typer.Typer(add_completion=False, help=\"Graph ETL utilities for Neo4j (roles, competencies/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ingest_adjacency", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def ingest_adjacency($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( file: str = typer.Argument(..., help=\"CSV/Excel file with columns: roleA, roleB, score, rationale, version, source\"), bidirectional: bool = typer.Option(True, help=\"Create both A->B and B->A\"), )"}, {"_type": "tag", "name": "ingest_all", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def ingest_all($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( data_dir: str = typer.Argument(\"data\", help=\"Directory containing CSV/Excel files for roles, competencies, requires, adjacency\"), bidirectional: bool = typer.Option(True, help=\"Create both A->B and B->A for adjacency\"), )"}, {"_type": "tag", "name": "ingest_competencies", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def ingest_competencies(file: str = typer.Argument(..., help=\"CSV\\/Excel file containing compete/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(file: str = typer.Argument(..., help=\"CSV/Excel file containing competencies: id, name, definition, source, version\"))"}, {"_type": "tag", "name": "ingest_requires", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def ingest_requires($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( file: str = typer.Argument(..., help=\"CSV/Excel file with columns: roleId, competencyId, requiredLevel, version, source, validFrom, validTo\") )"}, {"_type": "tag", "name": "ingest_roles", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def ingest_roles(file: str = typer.Argument(..., help=\"CSV\\/Excel file containing roles: id, nam/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(file: str = typer.Argument(..., help=\"CSV/Excel file containing roles: id, name, description, source, version\"))"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "pd", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^import pandas as pd$/", "language": "Python", "kind": "namespace", "nameref": "module:pandas"}, {"_type": "tag", "name": "pick_file", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^    def pick_file(options: List[Path]) -> Optional[Path]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[Path]", "kind": "function", "signature": "(options: List[Path])", "scope": "ingest_all", "scopeKind": "function"}, {"_type": "tag", "name": "seed_from_json", "path": "/home/kavia/workspace/code-generation/copy-of-mvp-career-platform---graph-db-214017-214037/CareerPlatformBackendAPI/src/etl/ingest_graph.py", "pattern": "/^def seed_from_json($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( directory: str = typer.Argument(\"seed\", help=\"Directory containing JSON seeds: roles.json, competencies.json, requires.json, adjacency.json\"), )"}], "hash": "8ac1af4eac05038463ce75b51d1984b1", "format-version": 4, "code-base-name": "CareerPlatformBackendAPI", "filename": "CareerPlatformBackendAPI/src/etl/ingest_graph.py", "fields": [{"name": "app = typer.Typer(add_completion=False, help=\"Graph ETL utilities for Neo4j (roles, competencies/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"17": ""}]}